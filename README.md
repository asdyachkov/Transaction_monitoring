<h1 align="center">Проект "Обработчик Транзакций" с Нагрузочным Тестированием</h1>

## Описание проекта

Этот проект представляет собой систему для обработки транзакций с возможностью проведения нагрузочного тестирования, чтобы измерить производительность системы. Нагрузочное тестирование является дополнением к основной функциональности системы обработки транзакций. Тестирование помогает понять, как система справляется с высокой нагрузкой, и позволяет оптимизировать её.

Система включает несколько микросервисов и работает с рядом технологий для обработки и хранения данных. На локальной машине удалось достичь производительности в **4000 запросов в секунду (RPS)**.

### Используемый стек технологий:

- **Docker Compose**: Весь проект запускается через Docker Compose, что упрощает процесс управления зависимостями и микросервисами.
- **PostgreSQL**: В качестве основной базы данных для хранения информации о пользователях, транзакциях и других данных.
- **PgBouncer**: Используется для оптимизации подключения к базе данных, управляя пулом соединений к PostgreSQL.
- **Redis**: Используется как кэш для хранения временных данных и для улучшения производительности.
- **RabbitMQ**: Применяется для асинхронной обработки задач и обмена сообщениями между микросервисами.
- **Kafka и Zookeeper**: Kafka используется для обработки потоков данных, а Zookeeper — для координации и управления кластерами Kafka.
- **Clickhouse**: Используется для аналитики и хранения больших объемов данных с высокой скоростью записи.
- **MongoDB**: Хранит неконсистентные или временные данные, которые не требуют строгих реляционных структур.
- **Django**: Используется для реализации API и управления основной логикой системы.
- **FastAPI**: Используется для микросервиса нагрузочного тестирования.

### Микросервисы:

1. **Transaction proccessor**:
   - Основной микросервис, который отвечает за обработку финансовых транзакций между пользователями.
   - Реализован на Django, обрабатывает REST-запросы и взаимодействует с PostgreSQL через PgBouncer для управления соединениями.
   - Отвечает за создание и обработку транзакций между аккаунтами пользователей, включая переводы и другие типы операций.

2. **Kafka Consumer**:
   - Слушает сообщения из Kafka, которые отправляются другими сервисами, и обрабатывает их в режиме реального времени.
   - Применяется для асинхронной обработки задач и отслеживания событий в системе.

3. **Notification Sender**:
   - Отвечает за отправку уведомлений пользователям системы. 
   - Использует RabbitMQ для постановки задач на отправку уведомлений, чтобы их можно было обрабатывать асинхронно.

4. **Микросервис Нагрузочного Тестирования**:
   - Реализован на FastAPI и предназначен для генерации пользователей, аккаунтов и транзакций для тестирования производительности системы.
   - Поддерживает запуск и остановку тестов, а также позволяет задавать количество пользователей и частоту транзакций.
   - Хранит результаты тестов и логи запросов, используя Redis и Clickhouse для аналитики.

### Как работает нагрузочное тестирование:

1. При запуске теста через интерфейс задается количество пользователей и частота транзакций (транзакций в секунду).
2. Создаются пользователи, аккаунты и начинается процесс имитации транзакций между аккаунтами.
3. Все транзакции обрабатываются основным сервисом обработки транзакций, а результаты записываются для последующего анализа.
4. По завершению теста можно остановить его и удалить сгенерированных пользователей и данные.

### Как запустить проект

Для запуска проекта необходимо использовать **Docker Compose**:
docker-compose up --build

После этого сервис будет доступен на порту 8001 для нагрузочного тестирования.
